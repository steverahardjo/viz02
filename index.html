<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steve's Arrival Visualization</title>

    <!-- Import Vega & Vega-Lite -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

    <!-- Import pure.css -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">

    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #333;
            color: #fff;
            text-align: justify;
            margin: 0;
            padding: 0;
        }

        .main-container {
            background-color: #f8f8f8;
            border-radius: 10px;
            padding: 20px;
            margin: 50px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .row {
            display: flex;
            justify-content: space-between; /* Changed to space-between for better alignment */
            margin-bottom: 20px;
        }

        .vis-container {
            background: #444;
            border-radius: 5px;
            width: auto;
            max-width: 100%;
            padding: 10px;
            flex: 1; /* Allow the containers to grow */
            margin: 0 10px; /* Maintain margins between containers */
        }

        .text-container {
            background: #666;
            padding: 10px;
            border-radius: 5px;
            font-size: 18px; /* Adjusted font size for readability */
            color: #fff;
            margin-left: 10px;
            flex: 1; /* Allow text container to grow */
        }

        #filter {
            display: flex;
            flex-direction: column;
            margin-left: 20px;
            background: #555;
            padding: 10px;
            border-radius: 5px;
        }

        #filter input {
            margin-bottom: 10px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
            width: 200px;
        }

        #stats {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-top: 20px;
        }

        .citation-container {
            background-color: #555;
            border-radius: 5px;
            padding: 5px;
            margin: 10px;
            text-align: center;
            font-size: 14px;
            color: #333;
            width: 100%;
        }
    </style>
</head>

<body>
    <h1>Foreign Arrivals to Malaysia (Jan 2020 - Jun 2024)</h1>

    <div class="main-container">
        <div class="container">
            <!-- First Row: Map and Text -->
            <div class="row">
                <div id="map" class="vis-container"></div>
                <div class="text-container">
                    According to records from Malaysia's Foreign Affairs, foreign nationals have entered Malaysia using various modes of transportation from January 2020 to June 2024, accumulating to 2 million records with Singapore citizens dominating the entries, as you can see from the flow map and the heat map (Johor). By looking at the overall timeline, we can see there are ticks in the overall flow of arrivals caused by the worldwide immigration restrictions due to COVID-19, and a gradual uptick from Eastern Europe caused by the Russo-Ukraine War. These numbers can be correlated to the 0.3% contribution of tourism to Malaysia's GDP.
                    <br>
                    These foreign arrivals are not just created by tourism demand alone but also by the continuous trend of Malaysians relying on foreign workers, mainly in the 3D sector (Dirty, Dangerous, and Demeaning) with 3.3 million right now officially documented in Malaysia, with many more entries illegally, which is around 15% compared to the Malaysian population where most of them are from Indonesia, Bangladesh, and Myanmar. This shows how dependent the Malaysian economy is on foreign influx.
                </div>
            </div>

            <!-- Second Row: Stream Graph -->
            <div class="row">
                <div id="stream" class="vis-container"></div>
            </div>

            <!-- Third Row: Sankey Diagram -->
            <div class="row">
                <div id="sankey" class="vis-container"></div>
            </div>

            <!-- Fourth Row: Bubble Chart -->
            <div class="row">
                <div id="bubble" class="vis-container"></div>
            </div>

            <!-- Fifth Row: Trellis and Bump Charts -->
            <div class="row">
                <div class="column-right" style="flex: 2;">
                    <div class="row">
                        <div id="trellis" class="vis-container"></div>
                    </div>
                    <div class="row">
                        <div id="bump" class="vis-container"></div>
                    </div>
                </div>
                <div class="column-left" style="flex: 1;">
                    <div id="isotype" class="vis-container"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Citation Container -->
    <div class="citation-container">
        <p>
            Tourism Malaysia. (n.d.). Tourism Key Performance Indicators. Retrieved from <a href="https://data.gov.my">https://data.gov.my</a><br>
            The Economist. (n.d.). Big Mac Index. Retrieved from <a href="https://github.com/TheEconomist/big-mac-data">https://github.com/TheEconomist/big-mac-data</a><br>
            DistanceFromTo. (n.d.). Distance from Malaysia. Retrieved from <a href="https://www.distancefromto.net/distance-from-malaysia-country">https://www.distancefromto.net/distance-from-malaysia-country</a><br>
            Department of Statistics Malaysia. (n.d.). Arrivals data. Retrieved from <a href="https://data.gov.my/data-catalogue/arrivals_soe">https://data.gov.my/data-catalogue/arrivals_soe</a>
        </p>
    </div>

    <script type="text/javascript">
        // Define the URLs for visualization sources
        var map = "https://raw.githubusercontent.com/steverahardjo/viz02/refs/heads/main/src/js/flow_map.vg.json";
        var bubble = "https://raw.githubusercontent.com/steverahardjo/viz02/refs/heads/main/src/js/bubblechart.vg.json";
        var streamgraph = "https://raw.githubusercontent.com/steverahardjo/viz02/refs/heads/main/src/js/timeline.vg.json";
        var isotype = "https://raw.githubusercontent.com/steverahardjo/viz02/refs/heads/main/src/js/isotype.vg.json";
        var trellis = "https://raw.githubusercontent.com/steverahardjo/viz02/refs/heads/main/src/js/Trellis_radial.vg.json";
        var bump = "https://raw.githubusercontent.com/steverahardjo/viz02/refs/heads/main/src/js/bumpchart.vg.json";
        var sankey = "https://raw.githubusercontent.com/steverahardjo/viz02/refs/heads/main/src/js/sankey.vg.json";

        // Embed visualizations into the DOM
        vegaEmbed('#map', map, { "actions": false });
        vegaEmbed('#stream', streamgraph, { "actions": false });
        vegaEmbed('#bubble', bubble, { "actions": false });
        vegaEmbed('#bump', bump, { "actions": false });
        vegaEmbed('#trellis', trellis, { "actions": false });
        vegaEmbed('#isotype', isotype, { "actions": false });
        vegaEmbed('#sankey', sankey, { "actions": false });
    </script>
</body>

</html>
